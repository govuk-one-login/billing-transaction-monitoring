<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="34" failures="1" errors="0" time="304.52">
  <testsuite name="
 Happy path - Upload valid mock invoice and verify data is seen in the billing view
" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:52:45" time="192.281" tests="2">
    <testcase classname="
 Happy path - Upload valid mock invoice and verify data is seen in the billing view
 upload valid pdf file in raw-invoice bucket and see that we can see the data in the view" name="
 Happy path - Upload valid mock invoice and verify data is seen in the billing view
 upload valid pdf file in raw-invoice bucket and see that we can see the data in the view" time="93.943">
    </testcase>
    <testcase classname="
 Happy path - Upload valid mock invoice and verify data is seen in the billing view
 upload valid csv file in raw-invoice bucket and check that we can see the data in the view" name="
 Happy path - Upload valid mock invoice and verify data is seen in the billing view
 upload valid csv file in raw-invoice bucket and check that we can see the data in the view" time="31.592">
    </testcase>
  </testsuite>
  <testsuite name="
Upload pdf invoice to raw invoice bucket and verify BillingAndTransactionsCuratedView results matches with expected data 
" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:52:45" time="244.054" tests="4">
    <testcase classname="
Upload pdf invoice to raw invoice bucket and verify BillingAndTransactionsCuratedView results matches with expected data 
 results retrieved from billing and transaction_curated view query should match with expected BillingQty equals TransactionQty and No TransactionPrice No BillingPrice ,2,£0.00,2,£0.00,-1234567.01" name="
Upload pdf invoice to raw invoice bucket and verify BillingAndTransactionsCuratedView results matches with expected data 
 results retrieved from billing and transaction_curated view query should match with expected BillingQty equals TransactionQty and No TransactionPrice No BillingPrice ,2,£0.00,2,£0.00,-1234567.01" time="60.005">
    </testcase>
    <testcase classname="
Upload pdf invoice to raw invoice bucket and verify BillingAndTransactionsCuratedView results matches with expected data 
 results retrieved from billing and transaction_curated view query should match with expected BillingQty less than TransactionQty and No BillingPrice but has TransactionPrice ,2,£0.00,11,£27.50,-100.0" name="
Upload pdf invoice to raw invoice bucket and verify BillingAndTransactionsCuratedView results matches with expected data 
 results retrieved from billing and transaction_curated view query should match with expected BillingQty less than TransactionQty and No BillingPrice but has TransactionPrice ,2,£0.00,11,£27.50,-100.0" time="48.105">
    </testcase>
    <testcase classname="
Upload pdf invoice to raw invoice bucket and verify BillingAndTransactionsCuratedView results matches with expected data 
 results retrieved from billing and transaction_curated view query should match with expected BillingQty greater than TransactionQty and No TransactionPrice but has BillingPrice,11,£27.50,2,£0.00,undefined" name="
Upload pdf invoice to raw invoice bucket and verify BillingAndTransactionsCuratedView results matches with expected data 
 results retrieved from billing and transaction_curated view query should match with expected BillingQty greater than TransactionQty and No TransactionPrice but has BillingPrice,11,£27.50,2,£0.00,undefined" time="34.664">
    </testcase>
    <testcase classname="
Upload pdf invoice to raw invoice bucket and verify BillingAndTransactionsCuratedView results matches with expected data 
 results retrieved from billing and transaction_curated view query should match with expected BillingQty equals TransactionQty but BillingPrice greater than TransactionPrice,2,£6.66,2,£2.46,170.7317" name="
Upload pdf invoice to raw invoice bucket and verify BillingAndTransactionsCuratedView results matches with expected data 
 results retrieved from billing and transaction_curated view query should match with expected BillingQty equals TransactionQty but BillingPrice greater than TransactionPrice,2,£6.66,2,£2.46,170.7317" time="34.59">
    </testcase>
  </testsuite>
  <testsuite name="
Execute athena transaction curated query to retrieve price 
" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:55:58" time="57.704" tests="4">
    <testcase classname="
Execute athena transaction curated query to retrieve price 
 price retrieved from transaction_curated athena view query should match with expected calculated price for 2" name="
Execute athena transaction curated query to retrieve price 
 price retrieved from transaction_curated athena view query should match with expected calculated price for 2" time="13.767">
    </testcase>
    <testcase classname="
Execute athena transaction curated query to retrieve price 
 price retrieved from transaction_curated athena view query should match with expected calculated price for 2" name="
Execute athena transaction curated query to retrieve price 
 price retrieved from transaction_curated athena view query should match with expected calculated price for 2" time="12.081">
    </testcase>
    <testcase classname="
Execute athena transaction curated query to retrieve price 
 price retrieved from transaction_curated athena view query should match with expected calculated price for 7" name="
Execute athena transaction curated query to retrieve price 
 price retrieved from transaction_curated athena view query should match with expected calculated price for 7" time="14.773">
    </testcase>
    <testcase classname="
Execute athena transaction curated query to retrieve price 
 price retrieved from transaction_curated athena view query should match with expected calculated price for 14" name="
Execute athena transaction curated query to retrieve price 
 price retrieved from transaction_curated athena view query should match with expected calculated price for 14" time="14.648">
    </testcase>
  </testsuite>
  <testsuite name="New invoice with same month, vendor, service as old line item" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:52:45" time="251.887" tests="1">
    <testcase classname="New invoice with same month, vendor, service as old line item should archive old line item" name="New invoice with same month, vendor, service as old line item should archive old line item" time="185.317">
    </testcase>
  </testsuite>
  <testsuite name="Given a csv with event data is uploaded to the transaction csv bucket" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:56:49" time="9.889" tests="1">
    <testcase classname="Given a csv with event data is uploaded to the transaction csv bucket stores the events we care about in the storage bucket" name="Given a csv with event data is uploaded to the transaction csv bucket stores the events we care about in the storage bucket" time="3.057">
    </testcase>
  </testsuite>
  <testsuite name="
 Unhappy path - Upload invalid pdf to the raw invoice bucket test
" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:56:57" time="5.808" tests="1">
    <testcase classname="
 Unhappy path - Upload invalid pdf to the raw invoice bucket test
 should move the original raw invoice to failed folder in s3 raw-invoice bucket upon uploading the invalid pdf file " name="
 Unhappy path - Upload invalid pdf to the raw invoice bucket test
 should move the original raw invoice to failed folder in s3 raw-invoice bucket upon uploading the invalid pdf file " time="3.25">
    </testcase>
  </testsuite>
  <testsuite name="
 Happy path tests 

 Generate valid event and check cloud watch logs lambda functions Filter,Clean, Store Transactions contains eventId
" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:56:59" time="14.068" tests="3">
    <testcase classname="
 Happy path tests 

 Generate valid event and check cloud watch logs lambda functions Filter,Clean, Store Transactions contains eventId
 Filter function cloud watch logs should contain eventid" name="
 Happy path tests 

 Generate valid event and check cloud watch logs lambda functions Filter,Clean, Store Transactions contains eventId
 Filter function cloud watch logs should contain eventid" time="4.37">
    </testcase>
    <testcase classname="
 Happy path tests 

 Generate valid event and check cloud watch logs lambda functions Filter,Clean, Store Transactions contains eventId
 Clean function cloud watch logs should contain eventid" name="
 Happy path tests 

 Generate valid event and check cloud watch logs lambda functions Filter,Clean, Store Transactions contains eventId
 Clean function cloud watch logs should contain eventid" time="4.497">
    </testcase>
    <testcase classname="
 Happy path tests 

 Generate valid event and check cloud watch logs lambda functions Filter,Clean, Store Transactions contains eventId
 Store Transactions function cloud watch logs should contain eventid" name="
 Happy path tests 

 Generate valid event and check cloud watch logs lambda functions Filter,Clean, Store Transactions contains eventId
 Store Transactions function cloud watch logs should contain eventid" time="1.553">
    </testcase>
  </testsuite>
  <testsuite name="Execute athena query to retrieve rate details" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:57:03" time="12.259" tests="1">
    <testcase classname="Execute athena query to retrieve rate details retrieved rate details should match rate csv uploaded in s3 config bucket" name="Execute athena query to retrieve rate details retrieved rate details should match rate csv uploaded in s3 config bucket" time="10.877">
    </testcase>
  </testsuite>
  <testsuite name="
 Upload pdf invoice to raw invoice bucket and generate transactions to verify that the BillingAndTransactionsCuratedView results matches with the expected data 
" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:52:45" time="273.269" tests="5">
    <testcase classname="
 Upload pdf invoice to raw invoice bucket and generate transactions to verify that the BillingAndTransactionsCuratedView results matches with the expected data 
 results retrieved from BillingAndTransactionsCuratedView view should match with expected No TransactionQty No TransactionPrice(no events) but has BillingQty Billing Price,2006/01/30,undefined,100" name="
 Upload pdf invoice to raw invoice bucket and generate transactions to verify that the BillingAndTransactionsCuratedView results matches with the expected data 
 results retrieved from BillingAndTransactionsCuratedView view should match with expected No TransactionQty No TransactionPrice(no events) but has BillingQty Billing Price,2006/01/30,undefined,100" time="51.66">
    </testcase>
    <testcase classname="
 Upload pdf invoice to raw invoice bucket and generate transactions to verify that the BillingAndTransactionsCuratedView results matches with the expected data 
 results retrieved from BillingAndTransactionsCuratedView view should match with expected BillingQty BillingPrice equals TransactionQty and TransactionPrice,2005/09/30,10,10" name="
 Upload pdf invoice to raw invoice bucket and generate transactions to verify that the BillingAndTransactionsCuratedView results matches with the expected data 
 results retrieved from BillingAndTransactionsCuratedView view should match with expected BillingQty BillingPrice equals TransactionQty and TransactionPrice,2005/09/30,10,10" time="49.966">
    </testcase>
    <testcase classname="
 Upload pdf invoice to raw invoice bucket and generate transactions to verify that the BillingAndTransactionsCuratedView results matches with the expected data 
 results retrieved from BillingAndTransactionsCuratedView should match with expected No BillingQty No Billing Price (no invoice) but has TransactionQty TransactionPrice,2005/12/28,1,undefined" name="
 Upload pdf invoice to raw invoice bucket and generate transactions to verify that the BillingAndTransactionsCuratedView results matches with the expected data 
 results retrieved from BillingAndTransactionsCuratedView should match with expected No BillingQty No Billing Price (no invoice) but has TransactionQty TransactionPrice,2005/12/28,1,undefined" time="12.66">
    </testcase>
    <testcase classname="
 Upload csv invoice to raw invoice bucket and generate transactions to verify that the BillingAndTransactionsCuratedView results matches with the expected data 
 results retrieved from BillingAndTransactionsCuratedView view should match with expected BillingQty BillingPrice greater than TransactionQty and TransactionPrice,2005/10/30,10,12" name="
 Upload csv invoice to raw invoice bucket and generate transactions to verify that the BillingAndTransactionsCuratedView results matches with the expected data 
 results retrieved from BillingAndTransactionsCuratedView view should match with expected BillingQty BillingPrice greater than TransactionQty and TransactionPrice,2005/10/30,10,12" time="45.837">
    </testcase>
    <testcase classname="
 Upload csv invoice to raw invoice bucket and generate transactions to verify that the BillingAndTransactionsCuratedView results matches with the expected data 
 results retrieved from BillingAndTransactionsCuratedView view should match with expected BillingQty BillingPrice lesser than TransactionQty and TransactionPrice,2005/11/30,10,6" name="
 Upload csv invoice to raw invoice bucket and generate transactions to verify that the BillingAndTransactionsCuratedView results matches with the expected data 
 results retrieved from BillingAndTransactionsCuratedView view should match with expected BillingQty BillingPrice lesser than TransactionQty and TransactionPrice,2005/11/30,10,6" time="45.633">
    </testcase>
  </testsuite>
  <testsuite name="
 Invoice data buckets exists in S3
" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:57:18" time="5.926" tests="3">
    <testcase classname="
 Invoice data buckets exists in S3
 Raw invoice bucket should exists in S3" name="
 Invoice data buckets exists in S3
 Raw invoice bucket should exists in S3" time="0.562">
    </testcase>
    <testcase classname="
 Invoice data buckets exists in S3
 Raw invoice textract data bucket should exists in S3" name="
 Invoice data buckets exists in S3
 Raw invoice textract data bucket should exists in S3" time="0.533">
    </testcase>
    <testcase classname="
 Invoice data buckets exists in S3
 Storage bucket should exists in S3" name="
 Invoice data buckets exists in S3
 Storage bucket should exists in S3" time="0.619">
    </testcase>
  </testsuite>
  <testsuite name="
 Verify VAT details exists in S3 config bucket
" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:57:24" time="2.095" tests="1">
    <testcase classname="
 Verify VAT details exists in S3 config bucket
 S3 config bucket should contain VAT details matches with expected vat config file " name="
 Verify VAT details exists in S3 config bucket
 S3 config bucket should contain VAT details matches with expected vat config file " time="0.623">
    </testcase>
  </testsuite>
  <testsuite name="
 Happy path tests

 Generate valid event and expect event id stored in S3
" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:56:55" time="32.594" tests="5">
    <testcase classname="
 Happy path tests

 Generate valid event and expect event id stored in S3
 S3 should contain event id for the generated valid event" name="
 Happy path tests

 Generate valid event and expect event id stored in S3
 S3 should contain event id for the generated valid event" time="2.19">
    </testcase>
    <testcase classname="
Unhappy path tests

 Generate invalid event and expect event id not stored in S3
 S3 should not contain event id for event payload which has invalid EventName in the payload" name="
Unhappy path tests

 Generate invalid event and expect event id not stored in S3
 S3 should not contain event id for event payload which has invalid EventName in the payload" time="7.159">
    </testcase>
    <testcase classname="
Unhappy path tests

 Generate invalid event and expect event id not stored in S3
 S3 should not contain event id for event payload which has invalid ComponentId in the payload" name="
Unhappy path tests

 Generate invalid event and expect event id not stored in S3
 S3 should not contain event id for event payload which has invalid ComponentId in the payload" time="7.221">
    </testcase>
    <testcase classname="
Unhappy path tests

 Generate invalid event and expect event id not stored in S3
 S3 should not contain event id for event payload which has invalid Timestamp in the payload" name="
Unhappy path tests

 Generate invalid event and expect event id not stored in S3
 S3 should not contain event id for event payload which has invalid Timestamp in the payload" time="7.24">
    </testcase>
    <testcase classname="
Unhappy path tests

 Generate invalid event and expect event id not stored in S3
 S3 should not contain event id for event payload which has invalid timestamp formatted in the payload" name="
Unhappy path tests

 Generate invalid event and expect event id not stored in S3
 S3 should not contain event id for event payload which has invalid timestamp formatted in the payload" time="7.202">
    </testcase>
  </testsuite>
  <testsuite name="
 Execute athena query to retrieve vendor service details
" errors="0" failures="1" skipped="0" timestamp="2023-06-13T14:57:15" time="15.248" tests="1">
    <testcase classname="
 Execute athena query to retrieve vendor service details
 retrieved vendor service details should match with vendor service csv uploaded in s3 config bucket " name="
 Execute athena query to retrieve vendor service details
 retrieved vendor service details should match with vendor service csv uploaded in s3 config bucket " time="10.912">
      <failure>Error: expect(received).toEqual(expected) // deep equality

- Expected  - 0
+ Received  + 7

@@ -1,49 +1,56 @@
  Array [
    Object {
+     &quot;contract_id&quot;: &quot;1&quot;,
      &quot;event_name&quot;: &quot;VENDOR_1_EVENT_1&quot;,
      &quot;service_name&quot;: &quot;Passport check&quot;,
      &quot;service_regex&quot;: &quot;Passport.*check&quot;,
      &quot;vendor_id&quot;: &quot;vendor_testvendor1&quot;,
      &quot;vendor_name&quot;: &quot;Vendor One&quot;,
    },
    Object {
+     &quot;contract_id&quot;: &quot;1&quot;,
      &quot;event_name&quot;: &quot;VENDOR_1_EVENT_3&quot;,
      &quot;service_name&quot;: &quot;Fraud check&quot;,
      &quot;service_regex&quot;: &quot;Fraud.*check&quot;,
      &quot;vendor_id&quot;: &quot;vendor_testvendor1&quot;,
      &quot;vendor_name&quot;: &quot;Vendor One&quot;,
    },
    Object {
+     &quot;contract_id&quot;: &quot;1&quot;,
      &quot;event_name&quot;: &quot;VENDOR_1_EVENT_4&quot;,
      &quot;service_name&quot;: &quot;Phone check&quot;,
      &quot;service_regex&quot;: &quot;Phone.*check&quot;,
      &quot;vendor_id&quot;: &quot;vendor_testvendor1&quot;,
      &quot;vendor_name&quot;: &quot;Vendor One&quot;,
    },
    Object {
+     &quot;contract_id&quot;: &quot;2&quot;,
      &quot;event_name&quot;: &quot;VENDOR_2_EVENT_2&quot;,
      &quot;service_name&quot;: &quot;Passport check&quot;,
      &quot;service_regex&quot;: &quot;Passport.*check&quot;,
      &quot;vendor_id&quot;: &quot;vendor_testvendor2&quot;,
      &quot;vendor_name&quot;: &quot;Vendor Two&quot;,
    },
    Object {
+     &quot;contract_id&quot;: &quot;2&quot;,
      &quot;event_name&quot;: &quot;VENDOR_2_EVENT_7&quot;,
      &quot;service_name&quot;: &quot;Kbv check&quot;,
      &quot;service_regex&quot;: &quot;Kbv.*check&quot;,
      &quot;vendor_id&quot;: &quot;vendor_testvendor2&quot;,
      &quot;vendor_name&quot;: &quot;Vendor Two&quot;,
    },
    Object {
+     &quot;contract_id&quot;: &quot;3&quot;,
      &quot;event_name&quot;: &quot;VENDOR_3_EVENT_4&quot;,
      &quot;service_name&quot;: &quot;Passport check&quot;,
      &quot;service_regex&quot;: &quot;Passport.*check&quot;,
      &quot;vendor_id&quot;: &quot;vendor_testvendor3&quot;,
      &quot;vendor_name&quot;: &quot;Vendor Three&quot;,
    },
    Object {
+     &quot;contract_id&quot;: &quot;3&quot;,
      &quot;event_name&quot;: &quot;VENDOR_3_EVENT_6&quot;,
      &quot;service_name&quot;: &quot;Address check&quot;,
      &quot;service_regex&quot;: &quot;Address.*check&quot;,
      &quot;vendor_id&quot;: &quot;vendor_testvendor3&quot;,
      &quot;vendor_name&quot;: &quot;Vendor Three&quot;,
    at Object.&lt;anonymous&gt; (/home/runner/work/di-billing-transaction-monitoring/di-billing-transaction-monitoring/integration_tests/tests/vendor-service-athena-tests.ts:14:21)
    at processTicksAndRejections (node:internal/process/task_queues:96:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="
Generate valid event and execute athena query
" errors="0" failures="0" skipped="0" timestamp="2023-06-13T14:57:13" time="34.638" tests="2">
    <testcase classname="
Generate valid event and execute athena query
 should contain eventId in the generated query results" name="
Generate valid event and execute athena query
 should contain eventId in the generated query results" time="13.471">
    </testcase>
    <testcase classname="
Generate invalid event and execute athena query
 should not contain eventId in the generated query results" name="
Generate invalid event and execute athena query
 should not contain eventId in the generated query results" time="17.574">
    </testcase>
  </testsuite>
</testsuites>